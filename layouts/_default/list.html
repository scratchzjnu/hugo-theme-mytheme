{{ define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end }}

{{ define "main" }}
<section class="list-page">
    <div class="container">
        <h1>{{ .Title }}</h1>
        {{ if .Content }}
        <div class="list-content">{{ .Content }}</div>
        {{ end }}
        
        {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") }}
        
        <!-- 文章统计信息 -->
        <div class="post-stats">
            <p>总文章数: {{ len (where .Site.RegularPages "Type" "posts") }} | 总页数: {{ $paginator.TotalPages }}</p>
        </div>
        
        <div class="posts-list">
            {{ range $paginator.Pages }}
            <a href="{{ .Permalink }}" class="post-link">
                <article class="post-item">
                    <div class="post-meta">
                        <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
                    </div>
                    <h2 class="post-title">{{ .Title }}</h2>
                    <div class="post-summary">
                        {{ if .Summary }}
                            {{ substr (.Summary | plainify) 0 80 }}{{ if gt (len (.Summary | plainify)) 80 }}...{{ end }}
                        {{ else }}
                            {{ substr (.Content | plainify) 0 80 }}{{ if gt (len (.Content | plainify)) 80 }}...{{ end }}
                        {{ end }}
                    </div>
                </article>
            </a>
            {{ end }}
        </div>
        
        <!-- 分页控件 -->
        {{ if or $paginator.HasPrev $paginator.HasNext }}
        <div class="pagination">
            {{ if $paginator.HasPrev }}
            <a href="{{ $paginator.Prev.URL }}" class="pagination-link prev">上一页</a>
            {{ end }}
            {{ if $paginator.HasNext }}
            <a href="{{ $paginator.Next.URL }}" class="pagination-link next">下一页</a>
            {{ end }}
        </div>
        {{ end }}
    </div>
</section>
{{ end }}